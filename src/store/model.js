import { action, thunk } from "easy-peasy";
import axios from "axios";

const url = "https://genshin-gacha-logs.herokuapp.com";
const model = {
  loading: false,
  setLoading: action((state, payload) => {
    state.loading = payload;
  }),
  userKey: undefined,
  setUserKey: action((state, payload) => {
    state.userKey = payload;
  }),
  sendLoadDataRequest: thunk(async (actions, payload, helpers) => {
    actions.setLoading(true);
    const { userKey } = helpers.getState();
    const { data } = await axios.post(`${url}/load-data`, {
      userKey: userKey,
    });
    actions.setOrderedGachaTypes(data);
    actions.setLoading(false);
  }),
  orderedGachaTypes: [],
  setOrderedGachaTypes: action((state, payload) => {
    state.orderedGachaTypes = payload;
  }),
  gachaLogs: [
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Kiếm Huyết Rồng",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Gậy Thu Phục",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Thần Kiếm Lê Minh",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Gậy Thu Phục",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Hắc Anh Thương",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Hắc Anh Thương",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Vũ Tài",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "4",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Câu Chuyện Diệt Rồng",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Câu Chuyện Diệt Rồng",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-02-21 13:20:31",
      name: "Tóm Tắt Ma Pháp",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-01-25 00:31:21",
      name: "Noelle",
      lang: "vi-vn",
      item_type: "Nhân Vật",
      rank_type: "4",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-01-25 00:31:17",
      name: "Kiếm Thiết Ảnh",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2021-01-25 00:30:58",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:47:32",
      name: "Kiếm Phi Thiên",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:47:28",
      name: "Nỏ Kéo",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:47:25",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:47:22",
      name: "Hắc Anh Thương",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Fischl",
      lang: "vi-vn",
      item_type: "Nhân Vật",
      rank_type: "4",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Thần Kiếm Lê Minh",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Câu Chuyện Diệt Rồng",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Kiếm Phi Thiên",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Thần Kiếm Lê Minh",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Hắc Anh Thương",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Quả Cầu Ngọc",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Quả Cầu Ngọc",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:27",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Vũ Tài",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "4",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Nỏ Kéo",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Quả Cầu Ngọc",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Kiếm Phi Thiên",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Kiếm Phi Thiên",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Kiếm Phi Thiên",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Gậy Thu Phục",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Kiếm Huyết Rồng",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Kiếm Huyết Rồng",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:46:00",
      name: "Nỏ Kéo",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Barbara",
      lang: "vi-vn",
      item_type: "Nhân Vật",
      rank_type: "4",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Nỏ Kéo",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Nỏ Kéo",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Cung Lông Vịt",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Lời Thề Xạ Thủ Thần",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Quả Cầu Ngọc",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Quả Cầu Ngọc",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
    {
      uid: "807897672",
      gacha_type: "301",
      item_id: "",
      count: "1",
      time: "2020-10-06 22:45:53",
      name: "Cung Lông Vịt",
      lang: "vi-vn",
      item_type: "Vũ Khí",
      rank_type: "3",
    },
  ],
  updateGachaLogs: action((state, payload) => {
    state.gachaLogs = payload;
  }),
  getGachaLogs: thunk(async (actions, payload, helpers) => {
    actions.setLoading(true);
    const { userKey } = helpers.getState();
    const { data } = await axios.post(`${url}/get-gacha-logs`, {
      key: payload,
      url: userKey,
    });
    actions.updateGachaLogs(data);
    actions.setLoading(false);
  }),
};

export default model;
